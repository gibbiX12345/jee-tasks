<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="jakarta.faces.core">
<div class="modal fade" id="taskEditMaskModal" tabindex="-1" aria-labelledby="taskEditMaskModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" id="taskEditMaskModalContent">
            <div class="modal-header">
                <h5 class="modal-title" id="taskEditMaskModalLabel">
                    #{taskBean.taskEdit == null ? 'Create New Task' : 'Edit Task'}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"/>
            </div>
            <h:form>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="taskEditMaskName" class="form-label">Title</label>
                        <h:inputText id="taskEditMaskName" value="#{taskBean.taskForm.title}"
                                     class="form-control" required="true">
                            <c:passThroughAttribute name="required" value="true"/>
                        </h:inputText>
                    </div>
                    <div class="mb-3">
                        <label for="taskEditMaskDescription" class="form-label">Description</label>
                        <h:inputText id="taskEditMaskDescription" value="#{taskBean.taskForm.description}"
                                     class="form-control" required="false"/>
                    </div>
                    <div class="mb-3">
                        <label for="taskEditMaskAssignee" class="form-label">Assignee</label>
                        <h:selectOneMenu id="taskEditMaskAssignee" value="#{taskBean.taskForm.assignedUserId}"
                                         class="form-control">
                            <f:selectItems value="#{userBean.users}" var="user"
                                           itemValue="#{user.userId}" itemLabel="#{user.email}"/>
                        </h:selectOneMenu>
                    </div>
                    <div class="mb-3">
                        <label for="taskEditMaskDueDate" class="form-label">Due Date</label>
                        <h:inputText id="taskEditMaskDueDate" value="#{taskBean.taskForm.dueDateString}"
                                     class="form-control" required="false" type="datetime-local"/>
                    </div>
                    <div class="mb-3">
                        <label for="taskEditMaskPriority" class="form-label">Priority</label>
                        <h:selectOneMenu id="taskEditMaskPriority" value="#{taskBean.taskForm.priorityId}"
                                         class="form-control">
                            <f:selectItems value="#{priorityBean.priorities}" var="priority"
                                           itemValue="#{priority.priorityId}" itemLabel="#{priority.level}"/>
                        </h:selectOneMenu>
                    </div>
                    <div class="mb-3">
                        <label for="taskEditMaskStatus" class="form-label">Status</label>
                        <h:selectOneMenu id="taskEditMaskStatus" value="#{taskBean.taskForm.statusId}"
                                         class="form-control">
                            <f:selectItems value="#{statusBean.statuses}" var="status" itemValue="#{status.statusId}"
                                           itemLabel="#{status.value}"/>
                        </h:selectOneMenu>
                    </div>
                </div>
                <div class="modal-footer">
                    <h:commandButton value="Delete" action="#{taskBean.deleteTask}"
                                     class="btn btn-danger"/>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <h:commandButton value="Save" action="#{taskBean.saveTask}"
                                     class="btn btn-primary"/>
                </div>
            </h:form>
        </div>
    </div>
</div>
</html>